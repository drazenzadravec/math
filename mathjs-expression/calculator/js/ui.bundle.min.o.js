function initDialogControl(e,t,n,o,i,s){var c,r,u,l,d=document.getElementById(e),h=document.getElementById(n);function a(e){d.style.width=u+e.clientX-c+"px",d.style.height=l+e.clientY-r+"px",h.style.width=u+e.clientX-c-i+"px",h.style.height=l+e.clientY-r-s+"px"}function m(e){document.documentElement.removeEventListener("mousemove",a,!1),document.documentElement.removeEventListener("mouseup",m,!1)}document.getElementById(o).addEventListener("mousedown",(function(e){c=e.clientX,r=e.clientY,u=parseInt(document.defaultView.getComputedStyle(d).width,10),l=parseInt(document.defaultView.getComputedStyle(d).height,10),document.documentElement.addEventListener("mousemove",a,!1),document.documentElement.addEventListener("mouseup",m,!1)}),!1),function(e){var n=0,o=0,i=0,s=0;document.getElementById(t)?document.getElementById(t).onmousedown=c:e.onmousedown=c;function c(e){(e=e||window.event).preventDefault(),i=e.clientX,s=e.clientY,document.onmouseup=u,document.onmousemove=r}function r(t){(t=t||window.event).preventDefault(),n=i-t.clientX,o=s-t.clientY,i=t.clientX,s=t.clientY,e.style.top=e.offsetTop-o+"px",e.style.left=e.offsetLeft-n+"px"}function u(){document.onmouseup=null,document.onmousemove=null}}(d)}function initDialogControlSnap(e,t,n,o,i,s){var c,r,u,l,d,h,a,m,f=4,p=null,g=!1,y=document.getElementById(e),v=document.getElementById(o),x=document.getElementById(n);function w(e,t,n,o,i){e.style.left=t+"px",e.style.top=n+"px",e.style.width=o+"px",e.style.height=i+"px"}function E(){w(v,d.left,d.top,d.width,d.height),v.style.opacity=0}function b(e){C(e);var t=c||r||l||u;p={x:h,y:a,cx:e.clientX,cy:e.clientY,w:d.width,h:d.height,isResizing:t,isMoving:!t&&R(),onTopEdge:l,onLeftEdge:u,onRightEdge:c,onBottomEdge:r}}function R(){return h>0&&h<d.width&&a>0&&a<d.height&&a<30}function C(e){d=y.getBoundingClientRect(),h=e.clientX-d.left,a=e.clientY-d.top,l=a<f,u=h<f,c=h>=d.width-f,r=a>=d.height-f,window.innerWidth-f,window.innerHeight-f}function T(e){C(e),m=e,g=!0}function B(e){if(C(e),p&&p.isMoving){d.width,d.height;E()}p=null}y.addEventListener("mousedown",(function(e){b(e),e.preventDefault()})),document.addEventListener("mousemove",T),document.addEventListener("mouseup",B),y.addEventListener("touchstart",(function(e){b(e.touches[0]),e.preventDefault()})),document.addEventListener("touchmove",(function(e){T(e.touches[0])})),document.addEventListener("touchend",(function(e){0===e.touches.length&&B(e.changedTouches[0])})),function e(){if(requestAnimationFrame(e),g)if(g=!1,p&&p.isResizing){if(p.onRightEdge&&(y.style.width=Math.max(h,10)+"px",x.style.width=Math.max(h-i,10)+"px"),p.onBottomEdge&&(y.style.height=Math.max(a,10)+"px",x.style.height=Math.max(a-s,10)+"px"),p.onLeftEdge){var t=Math.max(p.cx-m.clientX+p.w,10);t>10&&(y.style.width=t+"px",y.style.left=m.clientX+"px",x.style.width=t-i+"px",x.style.left=m.clientX+"px")}if(p.onTopEdge){var n=Math.max(p.cy-m.clientY+p.h,10);n>10&&(y.style.height=n+"px",y.style.top=m.clientY+"px",x.style.height=n-s+"px",x.style.top=m.clientY+"px")}E()}else{if(p&&p.isMoving)return y.style.top=m.clientY-p.y+"px",y.style.left=m.clientX-p.x+"px",x.style.top=m.clientY-p.y+"px",void(x.style.left=m.clientX-p.x+"px");c&&r||u&&l?y.style.cursor="nwse-resize":c&&l||r&&u?y.style.cursor="nesw-resize":c||u?y.style.cursor="ew-resize":r||l?y.style.cursor="ns-resize":R()?y.style.cursor="move":y.style.cursor="default"}}()}class AsyncFetch{constructor(){}uploadFile(e,t,n,o,i){let s=new FormData;s.append(t,e),fetch(n,{method:"POST",body:s}).then(this.responseAction).then(o).catch(i)}downloadFile(e,t,n,o){fetch(e,t).then(this.responseAction).then(this.blobResponse).then(n).catch(o)}arrayResponse(e){return e.arrayBuffer()}blobResponse(e){return e.blob()}formResponse(e){return e.formData()}textResponse(e){return e.text()}jsonResponse(e){return e.json()}responseAction(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))}generalRequest(e,t,n,o){fetch(e,t).then(this.responseAction).then(n).catch(o)}jsonRequest(e,t,n,o){fetch(e,t).then(this.responseAction).then(this.jsonResponse).then(n).catch(o)}formRequest(e,t,n,o){fetch(e,t).then(this.responseAction).then(this.formResponse).then(n).catch(o)}blobRequest(e,t,n,o){fetch(e,t).then(this.responseAction).then(this.blobResponse).then(n).catch(o)}arrayRequest(e,t,n,o){fetch(e,t).then(this.responseAction).then(this.arrayResponse).then(n).catch(o)}textRequest(e,t,n,o){fetch(e,t).then(this.responseAction).then(this.textResponse).then(n).catch(o)}}function getLocalDate(){var e=new Date,t=e.getMonth()+1,n=e.getDate();return t<10&&(t="0"+t),n<10&&(n="0"+n),e.getFullYear()+"-"+t+"-"+n}function getLocalTime(){var e=new Date;return addZero(e.getHours())+":"+addZero(e.getMinutes())+":"+addZero(e.getSeconds())}function addZero(e){return e<10&&(e="0"+e),e}function getCookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}function setCookie(e,t,n){var o=new Date;o.setTime(o.getTime()+864e5*n),document.cookie=e+"="+t+";path=/;expires="+o.toGMTString()}function deleteCookie(e){setCookie(e,"",-1)}function mergeObjects(e,t){let n,o=e||{},i=t||{};for(n in o)o.hasOwnProperty(n)&&(i[n]=o[n]);return i}function detectCapsLock(e,t){var n=document.getElementById(e),o=document.getElementById(t);n.addEventListener("keyup",(function(e){e.getModifierState("CapsLock")?o.style.display="block":o.style.display="none"}))}function copyTextToClipboard(e){var t=document.getElementById(e);return t.select(),t.setSelectionRange(0,99999),document.execCommand("copy")}function getIframeElement(e,t){return document.getElementById(e).contentWindow.document.getElementsByTagName(t)[0]}function summarize(e,t){if(e.length<=t)return e;const n=e.substring(0,t-1);return n.substring(0,n.lastIndexOf(" "))+"..."}function groupArrayByKey(e,t){return e.reduce(((e,n)=>((e[n[t]]=e[n[t]]||[]).push(n),e)),{})}function reverseString(e){return e.split("").reverse().join("")}function decToBin(e){return baseConvert(e,10,2)}function binTDec(e){return baseConvert(e,2,10)}function decToHex(e){return baseConvert(e,10,16)}function hexToDec(e){return baseConvert(e,16,10)}function baseConvert(e,t,n){return parseInt(e,t).toString(n)}function asciiToBin(e){if(0!==e.length){for(var t="",n=0;n<e.length;n++)t+=("00000000"+e.charCodeAt(n).toString(2)).slice(-8);return t}}function asciiToHex(e){if(0!==e.length){for(var t="",n=0;n<e.length;n++)t+=("0000"+e.charCodeAt(n).toString(16)).slice(-4);return t}}function hexToAscii(e){if(0!==(e=e.match(/[0-9A-Fa-f]{4}/g)).length){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(parseInt(e[n],16));return t}}function asciiToBase64(e){return btoa(e)}function base64ToAscii(e){return atob(e)}
